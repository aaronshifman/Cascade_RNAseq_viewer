<!DOCTYPE html>
<html ng-app="cascade" ng-controller="viewSettingController as viewSetting">
<head>
    <title>Cascade rna-Seq Browser</title>
    <link rel="stylesheet" type="text/css" href="css/jquery-ui.min.css"/>
    <link rel="stylesheet" type="text/css" href="css/ui-grid.min.css"/>
    <link rel="stylesheet" type="text/css" href="css/app.css"/>
    <link rel="stylesheet" type="text/css" href="css/meny.css"/>

    <script type="text/javascript" src="js/mathHelpers.js"></script>

    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/jquery-ui.js"></script>
    <script type="text/javascript" src="js/Three.js"></script>
    <script type="text/javascript" src="js/ThreeJS.Detector.js"></script>
    <script type="text/javascript" src="js/ThreeJS.helvetiker.js"></script>
    <script type="text/javascript" src="js/ThreeJS.OrbitControlls.js"></script>
    <script type="text/javascript" src="js/ThreeJS.WindowResize.js"></script>
    <script type="text/javascript" src="js/render.js"></script>
    <script type="text/javascript" src="js/angular.min.js"></script>
    <script type="text/javascript" src="js/meny.js"></script>
    <script type="text/javascript" src="js/dataTables.js"></script>
    <script type="text/javascript" src="js/ui-grid.min.js"></script>
    <script type="text/javascript" src="js/parsePathway.js"></script>
    <script type="text/javascript" src="js/calculatePathway.js"></script>
    <script type="text/javascript" src="js/controllHelpers.js"></script>
    <script type="text/javascript" src="js/dataHandler.js"></script>
    <script type="text/javascript" src="app.js"></script>


</head>
<body ng-style='{"background-color": settings.backgroundColor}'>
<script type="text/javascript">
    var displaySettings
    $(document).ready(function () {
        $("#expr_radio").buttonset();
        $("#cnv_radio").buttonset();
        $("#splice_check").button();
        $("#mutation_check").buttonset();
        
        displaySettings = {
            expression:1, //0,1,2
            splicing:true,
            snp:true,
            damaging:false,
            indel:true,
            cnv:1//0,1,2
        };
        $("#novel_snp").change(function(){
            displaySettings.snp = $(this).is(":checked");
        })
        $("#known_dammage").change(function(){
            displaySettings.damaging = $(this).is(":checked");
        })
        $("#novel_indel").change(function(){
            displaySettings.indel = $(this).is(":checked");
        })
        $("[name='cnv_setting']").change(function(){
            displaySettings.cnv = parseInt(this.value);
        })
        $("[name='expression_setting']").change(function(){
            displaySettings.expression = parseInt(this.value);
        })
        var meny = Meny.create({
            menuElement: document.querySelector('.meny_wrapper'),
            contentsElement: document.querySelector('.main_wrapper'),
            position: Meny.getQuery().p || 'left',
            height: 200,
            width: 2 * 260,
            threshold: 40 //mouse distance
        });
        if (Meny.getQuery().u && Meny.getQuery().u.match(/^http/gi)) {
            var contents = document.querySelector('.main_wrapper');
            contents.style.padding = '0px';
            contents.innerHTML = '<div class="cover"></div><iframe src="' + Meny.getQuery().u + '" style="width: 100%; height: 100%; border: 0; position: absolute;"></iframe>';
        }
        meny.addEventListener("open",function(){
            controls = undefined;
        });
        meny.addEventListener("close",function(){
            controls = new THREE.OrbitControls(camera);
        });
    });
</script>
<div class="meny-arrow"></div>
<div class="meny_wrapper">
    <h1 class="headings">Visualization Parameters</h1>

    <div id="expr_radio">
        <input name="expression_setting" type="radio"
               id="expr_off" value="0"><label for="expr_off">Off</label>

        <input name="expression_setting" type="radio"
               id="expr_median" value="1" checked><label for="expr_median">Median</label>

        <input name="expression_setting" type="radio"
               id="expr_ratio" value='2'><label for="expr_ratio">Ratio</label>
    </div>
    <div>
        <input name="splicing_setting" type="checkbox" id="splice_check" checked><label
            for="splice_check">Splicing</label>
    </div>
    <div id='mutation_check'>
        <input name="mutation" type="checkbox" id="novel_snp" checked><label
            for="novel_snp">Novel SNPs</label>
        <input name="mutation" type="checkbox" id="known_dammage"><label
            for="known_dammage">Damaging</label>
        <input name="mutation" type="checkbox" id="novel_indel" checked><label
            for="novel_indel">Novel Indels</label>
    </div>
    <div id="cnv_radio">
        <input name="cnv_setting" type="radio"
               id="cnv_off" value="0"><label for="cnv_off">Off</label>

        <input name="cnv_setting" type="radio"
               id="cnv_abs" value="1" checked><label for="cnv_abs">Median</label>

        <input name="cnv_setting" type="radio"
               id="cnv_rel" value='2'><label for="cnv_rel">Relative</label>
    </div>

    <h1 class="headings">Data Source</h1>
    <h2 class="subheadings">Pathway List</h2>

    <div ng-controller="pathwayListController" class="myGrid">
        <div id="grid1" ui-grid="gridOptions" ui-grid-selection class="grid"></div>
    </div>
    
    <div ng-controller="dataListController" class="myGrid" ng-show="show()">
        <div id="grid2" ui-grid="gridOptions" ui-grid-selection class="grid"></div>
    </div>
</div>

<div class="main_wrapper">

</div>
</body>
</html>
